var ee=Object.defineProperty;var te=(r,t,s)=>t in r?ee(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s;var k=(r,t,s)=>(te(r,typeof t!="symbol"?t+"":t,s),s);import{S as re,i as ne,s as se,e as F,b as oe,f as E,t as U,d as ie,h as ae,C as ue,D as ce,E as le,F as fe,G as de,g as me}from"../../chunks/index-ad65ff70.js";import{_ as he,S as Z,o as D,c as O,p as pe,O as I,E as ve,i as q,a as G,b as V,d as Y,e as be,f as _e,B as ge,g as we,h as ye,C as f,j as M,k as Se,l as Te,T as v,m as ke,n as H,q as K,r as xe,s as Ce,t as Me,u as Ae}from"../../chunks/ThemeBloc-e693fb8a.js";import{d as Ie}from"../../chunks/dayjs.min-287502cb.js";import{c as je}from"../../chunks/_commonjsHelpers-094ef602.js";import{s as Ee}from"../../chunks/singletons-1368421b.js";var Q={now:function(){return(Q.delegate||Date).now()},delegate:void 0},Le=function(r){he(t,r);function t(s,e,n){s===void 0&&(s=1/0),e===void 0&&(e=1/0),n===void 0&&(n=Q);var o=r.call(this)||this;return o._bufferSize=s,o._windowTime=e,o._timestampProvider=n,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=e===1/0,o._bufferSize=Math.max(1,s),o._windowTime=Math.max(1,e),o}return t.prototype.next=function(s){var e=this,n=e.isStopped,o=e._buffer,u=e._infiniteTimeWindow,c=e._timestampProvider,a=e._windowTime;n||(o.push(s),!u&&o.push(c.now()+a)),this._trimBuffer(),r.prototype.next.call(this,s)},t.prototype._subscribe=function(s){this._throwIfClosed(),this._trimBuffer();for(var e=this._innerSubscribe(s),n=this,o=n._infiniteTimeWindow,u=n._buffer,c=u.slice(),a=0;a<c.length&&!s.closed;a+=o?1:2)s.next(c[a]);return this._checkFinalizedStatuses(s),e},t.prototype._trimBuffer=function(){var s=this,e=s._bufferSize,n=s._timestampProvider,o=s._buffer,u=s._infiniteTimeWindow,c=(u?1:2)*e;if(e<1/0&&c<o.length&&o.splice(0,o.length-c),!u){for(var a=n.now(),i=0,l=1;l<o.length&&o[l]<=a;l+=2)i=l;i&&o.splice(0,i+1)}},t}(Z),We=Array.isArray;function $e(r){return r.length===1&&We(r[0])?r[0]:r}function Re(r,t){return D(function(s,e){var n=0;s.subscribe(O(e,function(o){return r.call(t,o,n++)&&e.next(o)}))})}function Ue(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var s=pe(r),e=$e(r);return e.length?new I(function(n){var o=e.map(function(){return[]}),u=e.map(function(){return!1});n.add(function(){o=u=null});for(var c=function(i){q(e[i]).subscribe(O(n,function(l){if(o[i].push(l),o.every(function(m){return m.length})){var d=o.map(function(m){return m.shift()});n.next(s?s.apply(void 0,G([],V(d))):d),o.some(function(m,b){return!m.length&&u[b]})&&n.complete()}},function(){u[i]=!0,!o[i].length&&n.complete()}))},a=0;!n.closed&&a<e.length;a++)c(a);return function(){o=u=null}}):ve}function Be(r){r===void 0&&(r={});var t=r.connector,s=t===void 0?function(){return new Z}:t,e=r.resetOnError,n=e===void 0?!0:e,o=r.resetOnComplete,u=o===void 0?!0:o,c=r.resetOnRefCountZero,a=c===void 0?!0:c;return function(i){var l,d,m,b=0,g=!1,_=!1,w=function(){d==null||d.unsubscribe(),d=void 0},S=function(){w(),l=m=void 0,g=_=!1},C=function(){var T=l;S(),T==null||T.unsubscribe()};return D(function(T,y){b++,!_&&!g&&w();var h=m=m!=null?m:s();y.add(function(){b--,b===0&&!_&&!g&&(d=R(C,a))}),h.subscribe(y),!l&&b>0&&(l=new Y({next:function(p){return h.next(p)},error:function(p){_=!0,w(),d=R(S,n,p),h.error(p)},complete:function(){g=!0,w(),d=R(S,u),h.complete()}}),q(T).subscribe(l))})(i)}}function R(r,t){for(var s=[],e=2;e<arguments.length;e++)s[e-2]=arguments[e];if(t===!0){r();return}if(t!==!1){var n=new Y({next:function(){n.unsubscribe(),r()}});return t.apply(void 0,G([],V(s))).subscribe(n)}}function De(r,t,s){var e,n,o,u,c=!1;return r&&typeof r=="object"?(e=r.bufferSize,u=e===void 0?1/0:e,n=r.windowTime,t=n===void 0?1/0:n,o=r.refCount,c=o===void 0?!1:o,s=r.scheduler):u=r!=null?r:1/0,Be({connector:function(){return new Le(u,t,s)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}function Oe(r,t,s){var e=_e(r)||t||s?{next:r,error:t,complete:s}:r;return e?D(function(n,o){var u;(u=e.subscribe)===null||u===void 0||u.call(e);var c=!0;n.subscribe(O(o,function(a){var i;(i=e.next)===null||i===void 0||i.call(e,a),o.next(a)},function(){var a;c=!1,(a=e.complete)===null||a===void 0||a.call(e),o.complete()},function(a){var i;c=!1,(i=e.error)===null||i===void 0||i.call(e,a),o.error(a)},function(){var a,i;c&&((a=e.unsubscribe)===null||a===void 0||a.call(e)),(i=e.finalize)===null||i===void 0||i.call(e)}))}):be}class x extends ge{async*mapEventToState(t){if(t instanceof Pe||t instanceof Fe||t instanceof B){yield this.state.copyWith({user:t.user});return}if(t instanceof Je||t instanceof X){yield this.state.copyWith({user:null});return}}}class j{}class Pe extends j{constructor(t){super(),this.user=t}}class Fe extends j{constructor(t){super(),this.user=t}}class Je extends j{constructor(){super()}}class B extends j{constructor(t){super(),this.user=t}}class X extends j{}class L extends we{constructor(s){super();k(this,"user");for(let e in s)this[e]=s[e]}static new(){return new L({})}copyWith(s){return new L({user:ye(s.user,this.user)})}}class P{constructor(){k(this,"id");k(this,"access_token");k(this,"token_type");k(this,"expires_in");k(this,"display_name")}static fromJson(t){const s=new P;for(const e in t)s[e]=t[e];return s}toJson(){return{id:this.id,access_token:this.access_token,token_type:this.token_type,expires_in:this.expires_in,display_name:this.display_name}}}const Ne=new I(r=>{f.has(x)||f.set(x,new x(L.new()));const t=localStorage.getItem("user");if(t)try{const e=P.fromJson(JSON.parse(t));f.get(x).add(new B(e))}catch(e){console.error(e),f.get(x).add(new X)}const s=f.get(x).state$.pipe(Re(e=>!!e.eventName&&e.eventName!==B.name)).subscribe(e=>{e.user?localStorage.setItem("user",JSON.stringify(e.user)):localStorage.removeItem("user")});return r.next(),()=>{s.unsubscribe()}});var z={exports:{}};(function(r,t){(function(s,e){r.exports=e()})(je,function(){return function(s,e,n){s=s||{};var o=e.prototype,u={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function c(i,l,d,m){return o.fromToBase(i,l,d,m)}n.en.relativeTime=u,o.fromToBase=function(i,l,d,m,b){for(var g,_,w,S=d.$locale().relativeTime||u,C=s.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],T=C.length,y=0;y<T;y+=1){var h=C[y];h.d&&(g=m?n(i).diff(d,h.d,!0):d.diff(i,h.d,!0));var p=(s.rounding||Math.round)(Math.abs(g));if(w=g>0,p<=h.r||!h.r){p<=1&&y>0&&(h=C[y-1]);var W=S[h.l];b&&(p=b(""+p)),_=typeof W=="string"?W.replace("%d",p):W(p,l,h.l,w);break}}if(l)return _;var $=w?S.future:S.past;return typeof $=="function"?$(_):$.replace("%s",_)},o.to=function(i,l){return c(i,l,this,!0)},o.from=function(i,l){return c(i,l,this)};var a=function(i){return i.$u?n.utc():n()};o.toNow=function(i){return this.to(a(this),i)},o.fromNow=function(i){return this.from(a(this),i)}}})})(z);const Ze=z.exports,qe=new I(r=>(Ie.extend(Ze),r.next(),()=>{})),Ge=()=>{const r=Ee,t={page:{subscribe:r.page.subscribe},navigating:{subscribe:r.navigating.subscribe},updated:r.updated};return Object.defineProperties(t,{preloading:{get(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:r.navigating.subscribe}},enumerable:!1},session:{get(){return Ye(),{}},enumerable:!1}}),t},Ve={subscribe(r){return Ge().page.subscribe(r)}};function Ye(){throw new Error("stores.session is no longer available. See https://github.com/sveltejs/kit/discussions/5883")}const He=new I(r=>{f.has(M)||f.set(M,new M(Se.new())),window.innerWidth<=960&&f.get(M).add(new Te);const t=Ve.subscribe(s=>f.get(M).routeId$.next(s.route.id));return r.next(),()=>{t()}});let A=[];const Ke=new I(r=>{f.has(v)||f.set(v,new v(ke.new()));let t;switch(window.matchMedia&&(window.matchMedia("(prefers-color-scheme: dark)").matches?t="dark":t="light"),localStorage.getItem("theme")||t){case"dark":f.get(v).add(new K);break;case"light":default:f.get(v).add(new H);break}switch(window.matchMedia&&(window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",J),A.push(()=>{window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",J)})),localStorage.getItem("dir")){case"rtl":f.get(v).add(new Ce);break;case"ltr":default:f.get(v).add(new xe);break}return A.push(Me(f.get(v).state$.pipe(Oe(n=>{n.theme?localStorage.setItem("theme",n.theme):localStorage.removeItem("theme"),n.dir?localStorage.setItem("dir",n.dir):localStorage.removeItem("dir")})).subscribe())),r.next(),()=>{for(const n in A)A[n]();A=[]}});function J(r){r.matches?f.get(v).add(new K):f.get(v).add(new H)}const Qe=Ue([qe,Ne,Ke,He]).pipe(Ae(()=>!0),De({refCount:!0}));function N(r){let t;const s=r[2].default,e=ce(s,r,r[1],null);return{c(){e&&e.c()},l(n){e&&e.l(n)},m(n,o){e&&e.m(n,o),t=!0},p(n,o){e&&e.p&&(!t||o&2)&&le(e,s,n,n[1],t?de(s,n[1],o,null):fe(n[1]),null)},i(n){t||(E(e,n),t=!0)},o(n){U(e,n),t=!1},d(n){e&&e.d(n)}}}function Xe(r){let t,s,e=r[0]&&N(r);return{c(){e&&e.c(),t=F()},l(n){e&&e.l(n),t=F()},m(n,o){e&&e.m(n,o),oe(n,t,o),s=!0},p(n,[o]){n[0]?e?(e.p(n,o),o&1&&E(e,1)):(e=N(n),e.c(),E(e,1),e.m(t.parentNode,t)):e&&(me(),U(e,1,1,()=>{e=null}),ie())},i(n){s||(E(e),s=!0)},o(n){U(e),s=!1},d(n){e&&e.d(n),n&&ae(t)}}}function ze(r,t,s){let e;ue(r,Qe,u=>s(0,e=u));let{$$slots:n={},$$scope:o}=t;return r.$$set=u=>{"$$scope"in u&&s(1,o=u.$$scope)},[e,o,n]}class it extends re{constructor(t){super(),ne(this,t,ze,Xe,se,{})}}export{it as default};
